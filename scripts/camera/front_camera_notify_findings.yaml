sequence:
  - service: notify.discord
    data_template:
      message: >-
        There was motion at the front at {{ as_timestamp(states.input_boolean.front_camera_motion.last_updated)|timestamp_custom('%F %T', True) }}. We found 
        {%- if "person" in state_attr('image_processing.doods_front_camera','matches') %}
          {{ state_attr('image_processing.doods_front_camera','summary').person }} people ({%- for state in state_attr('image_processing.doods_front_camera','matches').person %}{{ state.score|round(0) }}% at {{state.box}}{%- if loop.last %}{% else %}, {% endif %}{% endfor %})
        {% endif %}
        {%- if "car" in state_attr('image_processing.doods_front_camera','matches') %}
          {{ state_attr('image_processing.doods_front_camera','summary').car }} car(s) ({%- for state in state_attr('image_processing.doods_front_camera','matches').car %}{{ state.score|round(0) }}% at {{state.box}} {{ "parked" if (0.7240 < state.box[0] < 0.7330) and (0.4440 < state.box[1] < 0.4700) and (0.8200 < state.box[2] < 0.8500) and (0.540 < state.box[3] < 0.580) else "other" }}{%- if loop.last %}{% else %}, {% endif %}{% endfor %})
        {% endif %}
        {%- if "truck" in state_attr('image_processing.doods_front_camera','matches') %}
          {{ state_attr('image_processing.doods_front_camera','summary').truck }} truck(s) ({%- for state in state_attr('image_processing.doods_front_camera','matches').truck %}{{ state.score|round(0) }}%{%- if loop.last %}{% else %}, {% endif %}{% endfor %})
        {% endif %}
        {%- if "motorcycle" in state_attr('image_processing.doods_front_camera','matches') %}
          {{ state_attr('image_processing.doods_front_camera','summary').motorcycle }} motorcycle(s) ({%- for state in state_attr('image_processing.doods_front_camera','matches').motorcycle %}{{ state.score|round(0) }}%{%- if loop.last %}{% else %}, {% endif %}{% endfor %})
        {% endif %}
        {%- if "bicycle" in state_attr('image_processing.doods_front_camera','matches') %}
          {{ state_attr('image_processing.doods_front_camera','summary').bicycle }} bicycle(s) ({%- for state in state_attr('image_processing.doods_front_camera','matches').bicycle %}{{ state.score|round(0) }}%{%- if loop.last %}{% else %}, {% endif %}{% endfor %})
        {% endif %}
      target: !secret discord_camera_channel
      data:
        images:
        - "/data/homeassistant/cameras/front_camera_snapshot.jpg"
        - "/data/homeassistant/cameras/front_camera_latest.jpg"
